model OrderItem {
  id Int @id @default(autoincrement())

  orderId   Int
  productId Int
  variantId Int?

  quantity   Int     @default(1)
  unitPrice  Decimal @db.Decimal(12, 2)
  totalPrice Decimal @db.Decimal(12, 2)
  discount   Decimal @default(0) @db.Decimal(12, 2)

  metadata  Json?
  createdAt DateTime  @default(now()) @db.Timestamptz
  updatedAt DateTime  @updatedAt @db.Timestamptz
  deletedAt DateTime? @db.Timestamptz

  order   Order   @relation(fields: [orderId], references: [orderId], onDelete: Cascade)
  product Product @relation(fields: [productId], references: [id])
  variant ProductVariant? @relation(fields: [variantId], references: [id])

  @@index([orderId])
  @@index([productId])
  @@index([variantId])

  @@map("order_items")
}
