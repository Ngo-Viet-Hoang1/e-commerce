model Order {
  orderId Int @id @default(autoincrement())

  userId Int?
  user   User? @relation(fields: [userId], references: [id])

  shippingProvinceId Int?
  province           Province? @relation(fields: [shippingProvinceId], references: [id])

  shippingDistrictId Int?
  district           District? @relation(fields: [shippingDistrictId], references: [id])

  status      String  @db.VarChar(50)
  totalAmount Decimal @db.Decimal(12, 2)
  currency    String? @default("USD") @db.VarChar(10)

  shippingAddressDetail String? @db.VarChar(500)
  shippingRecipientName String? @db.VarChar(255)
  shippingPhone         String? @db.VarChar(20)
  shippingAddress       Json?

  billingAddress Json?

  shippingMethod String?  @db.VarChar(255)
  shippingFee    Decimal? @db.Decimal(12, 2)

  paymentStatus String? @default("pending") @db.VarChar(50)
  metadata      Json?

  createdAt   DateTime  @default(now()) @db.Timestamptz
  updatedAt   DateTime  @default(now()) @db.Timestamptz
  placedAt    DateTime? @db.Timestamptz
  deliveredAt DateTime? @db.Timestamptz
  deletedAt   DateTime? @db.Timestamptz

  orderItems OrderItem[]
  payment    Payment[]

  @@index([createdAt])
  @@index([status])
  @@index([paymentStatus])
  @@index([deletedAt])
}
